# 数据库

## 范式

关系数据库的设计主要是关系模式的设计，关系模式设计的好坏将直接影响到数据库设计的性能，将关系模式规范化是至关重要的。范式消除重复数据减少冗余数据，从而让数据库内的数据更好地组织、让磁盘空间得到更有效利用的一种标准化标准，同时消除潜在的异常（插入异常、更新异常、删除异常）。满足高等级的范式的先决条件是满足低等级范式。

- 第一范式：强调的是列的原子性，即数据库表的每一列都是不可分割的原子数据项；
- 第二范式：在第一范式基础上，消除非主属性对码的部分函数依赖；
- 第三范式：在第二范式基础上，消除非主属性对码的传递函数依赖；
- BC范式：所有属性（包括主属性和非主属性）都依赖于码或者候选键，并不存在传递依赖的情况。

### 优缺点

优点：

- 范式化的数据库更新起来更快；
- 范式化后只有很少的重复数据，只需修改更少的数据；
- 范式化的表更小，可以在内存中执行；
- 很少的冗余数据，在查询时候需要更少的`distinct`或`group by`语句。

缺点：范式化的表在查询时经常需要很多的关联，因为单独一个表内不存在冗余和重复数据，这导致稍微复杂一些的查询语句在查询范式的schema上都可能需要较多次的关联，会增加查询的代价，也可能使一些索引策略无效，因为范式化将列存放在不同的表中，而这些列在一个表中本可属于同一个索引。

_反范式的优缺点：_

- _优点：_

    1. _可以避免关联，因为所有数据几乎都可以在一张表中显示；_
    2. _可以设计有效的索引。_
- _缺点：冗余较多，删除数据会造成有些有用的信息丢失。_

## E-R图

***TODO***