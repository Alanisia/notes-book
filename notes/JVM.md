# JVM

## 运行时数据区

1. 程序计数器

2. 虚拟机栈

3. 本地方法栈

4. 堆

被所有内存共享的一块内存区域，在虚拟机启动时创建。此区域存放对象实例，几乎所有对象实例都在这里分配内存。

Java堆是垃圾收集器管理的主要区域。由于现在的垃圾收集器都采用分代收集算法，因此Java堆又分为新生代、老生代。

5. 方法区

   - 运行时常量池
   - 直接内存

## Java内存模型（JMM）

## 引用

1. 强引用

在程序代码普遍存在的，类似`Object o = new Object()`这类引用，只要强引用还存在，垃圾收集器永远不会回收掉被引用的对象。

2. 软引用

用来描述一些有用但并非必须的对象。

3. 弱引用


4. 虚引用



## GC（垃圾回收）

### 判断是否可以进行垃圾回收的算法

1. 引用计数法

2. 可达性分析算法

将所有的引用关系看作一张图，从一个节点GC ROOT开始，寻找对应的引用节点，找到这个节点以后，继续寻找这个节点的引用节点，当所有的引用节点全部找到以后，剩余的节点则被认为是没有被引用到的节点，即无用之节点，会被判定为可回收的对象。

可作为GC ROOT的对象：

1. 虚拟机栈中引用的对象（栈帧中的本地变量表）
2. 方法区中类静态属性引用的对象
3. 方法区中常量引用的对象
4. 本地方法栈中JNI（native方法）引用的对象

### 垃圾收集算法

- 标记-清除算法
- 复制算法
- 标记-整理算法
- 分代收集算法


### 垃圾收集器

- Serial收集器（复制算法）

- Serial Old收集器（标记-整理算法）

- ParNew收集器（停止-复制算法）

- Parallel Scavenge收集器（停止-复制算法）

- Parallel Old收集器（停止-复制算法）

- CMS(Concurrent Mark Swap)收集器（标记-清除算法）

- G1

### 垃圾回收过程



## JVM监控工具

- jstack：线程快照
- jmap：内存监控
- jps：查看当前Java进程
- jstat：显示虚拟机运行数据
- jinfo：虚拟机配置信息
- jhat：分析heapdump文件
- jvisualvm：虚拟机监视和故障处理平台